<!DOCTYPE html>
<html lang="pt-br" ng-app="app">
<head>
    <meta charset="UTF-8" />
    <title>consumo de API</title>


    <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/form.css">

    <!-- angular -->
    <script src="../bower_components/angular/angular.min.js"></script>


    <script src="../js/app.js"></script>
    <script src="../js/services/cadastroApi.js"></script>
    <script src="../js/controllers/cadastroController.js"></script>
    <script src="../bower_components/jquery/dist/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
            $("#cep").change(function(){
              var cep = $('#cep').val();
              if(cep != ''){
                $.ajax({url: "http://api.postmon.com.br/v1/cep/" + cep, success: function(result){
                    $('#rua').val(result.logradouro).prop('disabled', true);
                    $('#complemento').val(result.complemento).prop('disabled', true);
                    $('#bairro').val(result.bairro).prop('disabled', true);
                    $('#cidade').val(result.cidade).prop('disabled', true);
                    $('#estado').val(result.estado_info.nome).prop('disabled', true);
                }});
              }
              else
              {
                $('#rua').val("").prop('disabled', false);
                $('#complemento').val("").prop('disabled', false);
                $('#bairro').val("").prop('disabled', false);
                $('#cidade').val("").prop('disabled', false);
                $('#estado').val("").prop('disabled', false);
              }
            });
        });
    </script>
</head>
<body>

    <div class="container">
        <h1 class="text-center">Registro de Instituição</h1>
        <form role="form" class="form-horizontal" ng-controller="cadastroController">
          <fieldset>
            <input type="hidden" id="recursos" ng-model="cadastro.recursos" value="k">
            <div class="panel panel-default">
              <div class="panel-body">Instituição</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Razão social" ng-model="cadastro.razao_social">
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="CNPJ" ng-model="cadastro.cnpj">
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Área de atuação" ng-model="cadastro.areaAtuacao">
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Tipo" ng-model="cadastro.tipo">
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Site" ng-model="cadastro.site">
                  </div>
                </div>
              </div>
            </div>
            <div class="panel-group">
              <div class="panel panel-default">
                <div class="panel-body">Endereço</div>
                <div class="form-group">
                  <div class="col-md-12">
                    <div class="col-md-4">
                      <input type="text" class="form-control" id="cep" placeholder="Cep" ng-model="cadastro.cep">
                    </div>
                    <div class="col-md-4">
                      <input type="text" class="form-control" id="cidade" placeholder="Cidade" ng-model="cadastro.cidade">
                    </div>
                    <div class="col-md-4">
                      <input type="text" class="form-control" id="estado" placeholder="Estado" ng-model="cadastro.estado">
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-12">
                    <div class="col-md-6">
                      <input type="text" class="form-control" id="rua" placeholder="Rua" ng-model="cadastro.rua">
                    </div>
                    <div class="col-md-6">
                      <input type="text" class="form-control" placeholder="Número" ng-model="cadastro.numero">
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-md-12">
                    <div class="col-md-6">
                      <input type="text" class="form-control" id="complemento" placeholder="Complemento" ng-model="cadastro.complemento">
                    </div>
                    <div class="col-md-6">
                      <input type="text" class="form-control" id="bairro" placeholder="Bairro" ng-model="cadastro.bairro">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-body">Serviço</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Nome do Serviço" ng-model="cadastro.nomeServ">
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Descrição do Serviço" ng-model="cadastro.descServ">
                  </div>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-body">Contato</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="E-mail" ng-model="cadastro.email">
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Telefone" ng-model="cadastro.telefone">
                  </div>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-body">Acesso</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Login" ng-model="cadastro.login">
                  </div>
                  <div class="col-md-6">
                    <input type="password" class="form-control" placeholder="Senha" ng-model="cadastro.senha">
                  </div>
                </div>
              </div>
            </div>
            <div class="panel panel-default">
              <div class="panel-body">Permissão</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Nome Permissão" ng-model="cadastro.nomePermissao">
                  </div>
                  <div class="col-md-6">
                    <input type="text" class="form-control" placeholder="Tipo de permissão" ng-model="cadastro.tipoPermissao">
                  </div>
                </div>
              </div>
            </div>

            <div class="panel panel-default">
              <div class="panel-body">Recursos</div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Nome do Recurso" id="nomeRec" ng-model="recurso.nomeRec">
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Descrição do recurso" id="descricaoRec" ng-model="recurso.descricaoRec">
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control" placeholder="Qtd. Recurso" id="quantidadeRec" ng-model="recurso.quantidadeRec">
                  </div>
                  <div class="col-md-4">
                    <button type="button" class="btn btn-default" ng-click="adicionaRecurso(recurso)">+</button>
                  </div>
                </div>
              </div>
            </div>


            <hr>
            <div class="form-group">
              <div class="col-md-12">
                <div class="col-md-6">
                  <button type="button" class="btn btn-default" ng-click="efetuarCadastro(cadastro)">Cadastrar</button>
                </div>
              </div>
            </div>
          </fieldset>
        </form>
    </div>
</body>
</html>
